<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ingresar · Mis Finanzas 2.0</title>
  <style>
    :root{--panel:#fff;--text:#0f172a;--muted:#64748b;--accent:#38bdf8}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,Segoe UI,Roboto,sans-serif;background:#eef2f7;color:var(--text)}
    .wrap{max-width:480px;margin:8vh auto;padding:16px}
    .card{background:var(--panel);border-radius:14px;box-shadow:0 10px 30px rgba(2,6,23,.08);padding:20px}
    h1{margin:.2rem 0 1rem;display:flex;gap:.6rem;align-items:center;font-size:1.1rem}
    .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#0ea5e9)}
    label{display:block;margin:.4rem 0 .2rem;font-size:.86rem}
    input{width:100%;padding:.7rem;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
    .row{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.8rem}
    button{padding:.6rem .9rem;border:0;border-radius:10px;cursor:pointer}
    .primary{background:var(--accent);color:#fff}
    .ghost{background:#1118270f;color:#111827;border:1px solid #e5e7eb}
    .muted{color:var(--muted);font-size:.9rem}
    #msg{margin-top:.6rem;color:#ef4444;font-size:.9rem;min-height:1.2em}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1><span class="logo"></span> <span>Ingresá a <strong>Mis Finanzas 2.0</strong></span></h1>
      <label>Email</label>
      <input id="email" type="email" autocomplete="email" placeholder="tu@email.com" />
      <label>Contraseña</label>
      <input id="password" type="password" autocomplete="current-password" placeholder="••••••••" />
      <div class="row">
        <button id="btnLogin" class="primary">Iniciar sesión</button>
        <button id="btnSignup" class="ghost">Crear cuenta</button>
        <button id="btnReset" class="ghost">Restablecer</button>
      </div>
      <div id="msg"></div>
      <p class="muted" style="margin-top:10px">Al ingresar, te redirigimos a tu app.</p>
    </div>
  </div>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

  <script>
    // Config de TU proyecto (la que ya usaste)
    const firebaseConfig = {
      apiKey: "AIzaSyAoS2NRmIQ1kL97stj1x0kJfBkcby2bdkw",
      authDomain: "mis-finanzas-2.firebaseapp.com",
      projectId: "mis-finanzas-2",
      storageBucket: "mis-finanzas-2.firebasestorage.app",
      messagingSenderId: "178519871416",
      appId: "1:178519871416:web:f49bc2c66d61e6ae15094d"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const $ = s => document.querySelector(s);
    const msg = $('#msg');

    // Si ya hay sesión, vamos directo a la app
    auth.onAuthStateChanged(user => {
      if (user) location.href = 'app.html';
    });

    $('#btnLogin').onclick = async () => {
      msg.textContent = '';
      const email = $('#email').value.trim();
      const pass  = $('#password').value;
      try { await auth.signInWithEmailAndPassword(email, pass); }
      catch(e){ msg.textContent = e.message || e.code; }
    };
    $('#btnSignup').onclick = async () => {
      msg.textContent = '';
      const email = $('#email').value.trim();
      const pass  = $('#password').value;
      try { await auth.createUserWithEmailAndPassword(email, pass); msg.style.color='#16a34a'; msg.textContent='Cuenta creada. Ahora podés iniciar sesión.'; }
      catch(e){ msg.style.color='#ef4444'; msg.textContent = e.message || e.code; }
    };
    $('#btnReset').onclick = async () => {
      msg.textContent = '';
      const email = $('#email').value.trim();
      if(!email){ msg.textContent='Ingresá tu email para enviarte el enlace.'; return; }
      try { await auth.sendPasswordResetEmail(email); msg.style.color='#0ea5e9'; msg.textContent='Te enviamos el correo de restablecimiento.'; }
      catch(e){ msg.style.color='#ef4444'; msg.textContent = e.message || e.code; }
    };
  </script>
</body>
</html>
